"use strict";(self.webpackChunkuser_requests_handler=self.webpackChunkuser_requests_handler||[]).push([[910],{910:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});var n=t(885),s=t(791),l=t(71),r=t(740),i=t(992);var c=t(683);function u(){var e=(0,s.useState)(""),a=(0,n.Z)(e,2),t=a[0],l=a[1],c=(0,r.T)();return{value:t,setValue:l,onInputChange:function(e){var a=e.name,t=e.value;switch(a){case"ID":l(t.replace(/[^0-9]/g,"")),c((0,i.nv)({filterProp:a,value:t.replace(/[^0-9-]/g,"")}));break;case"FIO":l(t.replace(/[^a-zA-Z\s]/g,"")),c((0,i.nv)({filterProp:a,value:t.replace(/[^a-zA-Z\s]/g,"").trim()}));break;case"BIRTH":l(t.replace(/[^0-9/]/g,"")),c((0,i.nv)({filterProp:a,value:t.replace(/[^0-9/]/g,"")}));break;case"PHONE":l(t.replace(/[^0-9-)(.]/g,"")),c((0,i.nv)({filterProp:a,value:t.replace(/[^0-9-)(.]/g,"")}));break;default:return}}}}var o=t(184),d=function(e){var a=e.id,t=e.options,n=e.isTableDataLoading,s=e.status,l=e.role,c=(0,r.T)();return(0,o.jsx)("select",{className:"".concat(l||""," selection-menu"),defaultValue:t[0].option,onChange:function(e){return t=e.target.value,void c((0,i.nv)({filterProp:a,value:t}));var t},disabled:n||"failed"===s,children:t.map((function(e){return(0,o.jsx)("option",{className:"selection-menu__option",value:e.option,children:e.option},e.id)}))})},f=function(){var e=(0,r.C)((function(e){return e.formSlice})).formSelectTemplates,a=(0,r.C)((function(e){return e.tableSlice})),t=a.isTableDataLoading,n=a.fetchUsersStatus,l=u(),i=u(),f=u(),p=u(),h=(0,s.useRef)(null),m=function(e,a){switch(e){case"ID":l.onInputChange({name:e,value:a.target.value}),i.setValue(""),f.setValue(""),p.setValue("");break;case"FIO":i.onInputChange({name:e,value:a.target.value}),l.setValue(""),f.setValue(""),p.setValue("");break;case"BIRTH":f.onInputChange({name:e,value:a.target.value}),l.setValue(""),i.setValue(""),p.setValue("");break;case"PHONE":p.onInputChange({name:e,value:a.target.value}),l.setValue(""),i.setValue(""),f.setValue("");break;default:return}};return(0,s.useEffect)((function(){!t&&h.current&&h.current.focus()}),[t,h]),(0,o.jsx)("form",{className:"form",children:(0,o.jsxs)("fieldset",{className:"form__wrapper",children:[(0,o.jsx)("input",{className:"form__input form__input--id",type:"text",placeholder:"ID",value:l.value,onChange:function(e){return m("ID",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n}),(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0424\u0418\u041e",value:i.value,onChange:function(e){return m("FIO",e)},disabled:t||"failed"===n}),(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",value:f.value,onChange:function(e){return m("BIRTH",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n}),(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",value:p.value,onChange:function(e){return m("PHONE",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n}),(0,o.jsx)(o.Fragment,{children:e.map((function(e){return(0,o.jsx)(d,(0,c.Z)((0,c.Z)({},e),{},{role:"form__selection-menu",isTableDataLoading:t,status:n}),e.id)}))})]})})},p=t(381),h=function(e){var a=e.id,t=e.name,r=e.birth,i=e.phone,c=e.filial,u=e.isPaid,d=e.status,f=(0,s.useState)({"\u0417\u0430\u043a\u0440\u044b\u0442\u0430":"close","\u041d\u043e\u0432\u0430\u044f":"active","\u0412 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435":"progress"}),p=(0,n.Z)(f,1)[0];return(0,o.jsxs)("tr",{className:"table__row",children:[(0,o.jsx)("td",{className:"table__cell table__cell--id",children:a}),(0,o.jsx)("td",{className:"table__cell table__cell--name",children:t}),(0,o.jsx)("td",{className:"table__cell table__cell--birth",children:r}),(0,o.jsx)("td",{className:"table__cell table__cell--phone",children:i}),(0,o.jsx)("td",{className:"table__cell table__cell--filial",children:c}),(0,o.jsx)("td",{className:"table__cell table__cell--paid",children:u?(0,o.jsx)(l.GcF,{size:"24px",color:"green"}):(0,o.jsx)(l.Jvf,{size:"24px",color:"red"})}),(0,o.jsx)("td",{className:"table__cell table__cell--status ".concat(p[d]),children:d})]},a)},m=t(355),_=t(36),b=function(e){var a=e.name,t=e.text,l=e.isTableDataLoading,u=e.isUsersDataEmpty,d=e.fetchUsersErrMsg,f=e.dataLength,p=(0,s.useState)("DSC"),h=(0,n.Z)(p,2),b=h[0],v=h[1],x=(0,s.useState)(!1),g=(0,n.Z)(x,2),j=g[0],N=g[1],Z=(0,s.useState)({id:!1,fio:!1,birth:!1,phone:!1,filial:!1,isPaid:!1,status:!1}),D=(0,n.Z)(Z,2),k=D[0],C=D[1],S=(0,r.T)(),w=function(e){"DSC"===b?(v("ASC"),S((0,i.$c)({sortOpt:e}))):"ASC"===b&&(v("DSC"),S((0,i.uB)({sortOpt:e}))),function(e){switch(e){case"id":C((function(){return(0,c.Z)((0,c.Z)({},k),{},{id:!k.id})}));break;case"fio":C((function(){return(0,c.Z)((0,c.Z)({},k),{},{fio:!k.fio})}));break;case"birth":C((function(){return(0,c.Z)((0,c.Z)({},k),{},{birth:!k.birth})}));break;case"phone":C((function(){return(0,c.Z)((0,c.Z)({},k),{},{phone:!k.phone})}));break;case"filial":C((function(){return(0,c.Z)((0,c.Z)({},k),{},{filial:!k.filial})}));break;case"isPaid":C((function(){return(0,c.Z)((0,c.Z)({},k),{},{isPaid:!k.isPaid})}));break;case"status":C((function(){return(0,c.Z)((0,c.Z)({},k),{},{status:!k.status})}));break;default:;}}(e)};return(0,s.useEffect)((function(){N(!!(!l&&!d&&!u&&f>1))}),[l,u,d,f]),(0,o.jsxs)("th",{className:"table__col table__col--head",onClick:function(){return j&&w(a)},children:[t,(0,o.jsx)(o.Fragment,{children:"ASC"===b?(0,o.jsx)(_.qwl,{"data-testid":"arrow-up"}):(0,o.jsx)(m.sF,{"data-testid":"arrow-down"})})]})},v=function(){var e=(0,r.C)((function(e){return e.tableSlice})),a=e.filteredTableData,t=e.isTableDataLoading,l=e.fetchUsersErrMsg,u=e.isUsersDataEmpty,d=e.tableHeadTemplates,f=(0,s.useState)(!1),m=(0,n.Z)(f,2),_=m[0],v=m[1],x=(0,s.useState)(!1),g=(0,n.Z)(x,2),j=g[0],N=g[1],Z=(0,r.T)();return(0,s.useEffect)((function(){0===a.length?Z((0,i.LQ)(!0)):Z((0,i.LQ)(!1))}),[a]),(0,s.useEffect)((function(){v(!(t||!l))}),[t,l]),(0,s.useEffect)((function(){N(!!(!t&&!l&&u))}),[t,l,u]),(0,o.jsx)("div",{className:"table-wrapper",children:(0,o.jsxs)("table",{className:"table ".concat(t?"loading":""," ").concat(u?"empty":""),children:[(0,o.jsx)("thead",{className:"table__head sticky",children:(0,o.jsx)("tr",{className:"table__row table__row--head",children:d.map((function(e){return(0,o.jsx)(b,(0,c.Z)((0,c.Z)({},e),{},{isTableDataLoading:t,isUsersDataEmpty:u,fetchUsersErrMsg:l,dataLength:a.length}),e.id)}))})}),(0,o.jsx)("tbody",{className:"table__body",children:t?(0,o.jsx)("div",{className:"table__preloader",children:(0,o.jsx)(p.Z,{})}):_?(0,o.jsxs)("span",{className:"error-message",children:["Error: ",l]}):j?(0,o.jsx)("span",{className:"message",children:"No matches!"}):(0,o.jsx)(o.Fragment,{children:a.map((function(e){return(0,o.jsx)(h,(0,c.Z)({},e),e.id)}))})})]})})},x=function(){var e=(0,r.C)((function(e){return e.tableSlice})),a=e.request\u0421ount,t=e.isTableDataLoading,c=e.filteredTableData,u=(0,s.useState)("\u0437\u0430\u044f\u0432\u043e\u043a"),d=(0,n.Z)(u,2),p=d[0],h=d[1],m=(0,r.T)();return(0,s.useEffect)((function(){m((0,i.tX)(c.length)),h(function(e,a){var t=(e=Math.abs(e)%100)%10;return e>10&&e<20?a[2]:t>1&&t<5?a[1]:1==t?a[0]:a[2]}(c.length,["\u0437\u0430\u044f\u0432\u043a\u0430","\u0437\u0430\u044f\u0432\u043a\u0438","\u0437\u0430\u044f\u0432\u043e\u043a"]))}),[c]),(0,s.useEffect)((function(){return function(){m((0,i.nv)({filterProp:"",value:""}))}}),[]),(0,o.jsx)("section",{className:"main-page",children:(0,o.jsxs)("div",{className:"main-page__wrapper",children:[(0,o.jsx)("div",{className:"result",children:(0,o.jsxs)("div",{className:"result__wrapper",children:[(0,o.jsx)(l.jyt,{size:"34px",color:"#000"}),(0,o.jsxs)("h1",{className:"result__text","data-testid":"counter",children:[t?"0":a," ",p]})]})}),(0,o.jsx)(f,{}),(0,o.jsx)(v,{})]})})}}}]);
//# sourceMappingURL=910.75c36b3c.chunk.js.map