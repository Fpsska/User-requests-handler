"use strict";(self.webpackChunkcode_construction_task=self.webpackChunkcode_construction_task||[]).push([[249],{249:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});var n=t(152),s=t(791),l=t(71),r=t(740),i=t(413),c=t(365);function u(e){var a=(0,s.useState)(e),t=(0,n.Z)(a,2),l=t[0],i=t[1],u=(0,r.T)();return{value:l,onInputChange:function(e){var a=e.name,t=e.value;switch(a){case"ID":i(t.replace(/[^0-9]/g,"")),u((0,c.nv)({name:a,value:t.replace(/[^0-9-]/g,"")}));break;case"FIO":i(t.replace(/[^a-zA-Z\s]/g,"")),u((0,c.nv)({name:a,value:t.replace(/[^a-zA-Z\s]/g,"").trim()}));break;case"BIRTH":i(t.replace(/[^0-9/]/g,"")),u((0,c.nv)({name:a,value:t.replace(/[^0-9/]/g,"")}));break;case"PHONE":i(t.replace(/[^0-9-)(.]/g,"")),u((0,c.nv)({name:a,value:t.replace(/[^0-9-)(.]/g,"")}));break;default:return}}}}var o=t(184),d=function(e){var a=e.id,t=e.options,n=e.isTableDataLoading,s=e.status,l=(0,r.T)();return(0,o.jsx)("div",{className:"form__template",children:(0,o.jsx)("select",{className:"selection-menu",defaultValue:t[0].option,onChange:function(e){return l((0,c.nv)({name:a,value:e.target.value}))},disabled:n||"failed"===s,children:t.map((function(e){return(0,o.jsx)("option",{className:"selection-menu__option",value:e.option,children:e.option},e.id)}))})})},m=function(){var e=(0,r.C)((function(e){return e.formSlice})).formSelectTemplates,a=(0,r.C)((function(e){return e.tableSlice})),t=a.isTableDataLoading,n=a.status,s=u(""),l=u(""),c=u(""),m=u(""),f=function(e,a){switch(e){case"ID":s.onInputChange({name:e,value:a.target.value});break;case"FIO":l.onInputChange({name:e,value:a.target.value});break;case"BIRTH":c.onInputChange({name:e,value:a.target.value});break;case"PHONE":m.onInputChange({name:e,value:a.target.value});break;default:return}};return(0,o.jsx)("form",{className:"form",children:(0,o.jsxs)("fieldset",{className:"form__wrapper",children:[(0,o.jsx)("div",{className:"form__template",children:(0,o.jsx)("input",{className:"form__input form__input--id",type:"text",placeholder:"ID",value:s.value,onChange:function(e){return f("ID",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n})}),(0,o.jsx)("div",{className:"form__template",children:(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0424\u0418\u041e",value:l.value,onChange:function(e){return f("FIO",e)},disabled:t||"failed"===n})}),(0,o.jsx)("div",{className:"form__template",children:(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",value:c.value,onChange:function(e){return f("BIRTH",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n})}),(0,o.jsx)("div",{className:"form__template",children:(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",value:m.value,onChange:function(e){return f("PHONE",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n})}),(0,o.jsx)(o.Fragment,{children:e.map((function(e){return(0,o.jsx)(d,(0,i.Z)((0,i.Z)({},e),{},{isTableDataLoading:t,status:n}),e.id)}))})]})})},f=t(100),p=function(e){var a=e.id,t=e.name,r=e.birth,i=e.phone,c=e.filial,u=e.isPaid,d=e.status,m=(0,s.useState)({"\u0417\u0430\u043a\u0440\u044b\u0442\u0430":"close","\u041d\u043e\u0432\u0430\u044f":"active","\u0412 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435":"progress"}),f=(0,n.Z)(m,1)[0];return(0,o.jsxs)("tr",{className:"table__row",children:[(0,o.jsx)("td",{className:"table__cell table__cell--id",children:a}),(0,o.jsx)("td",{className:"table__cell table__cell--name",children:t}),(0,o.jsx)("td",{className:"table__cell table__cell--birth",children:r}),(0,o.jsx)("td",{className:"table__cell table__cell--phone",children:i}),(0,o.jsx)("td",{className:"table__cell table__cell--filial",children:c}),(0,o.jsx)("td",{className:"table__cell table__cell--paid",children:u?(0,o.jsx)(l.GcF,{size:"24px",color:"green"}):(0,o.jsx)(l.Jvf,{size:"24px",color:"red"})}),(0,o.jsx)("td",{className:"table__cell table__cell--status ".concat(f[d]),children:d})]},a)},_=t(355),h=t(36),b=function(e){var a=e.name,t=e.text,l=e.isTableDataLoading,u=e.isUsersDataEmpty,d=e.fetchUsersErrMsg,m=(0,s.useState)("DSC"),f=(0,n.Z)(m,2),p=f[0],b=f[1],v=(0,s.useState)({id:!1,fio:!1,birth:!1,phone:!1,filial:!1,isPaid:!1,status:!1}),x=(0,n.Z)(v,2),j=x[0],g=x[1],N=(0,r.T)(),Z=function(e){"ASC"===p?(b("DSC"),N((0,c.uB)({sortOpt:e}))):"DSC"===p&&(b("ASC"),N((0,c.$c)({sortOpt:e}))),function(e){switch(e){case"id":g((function(){return(0,i.Z)((0,i.Z)({},j),{},{id:!j.id})}));break;case"fio":g((function(){return(0,i.Z)((0,i.Z)({},j),{},{fio:!j.fio})}));break;case"birth":g((function(){return(0,i.Z)((0,i.Z)({},j),{},{birth:!j.birth})}));break;case"phone":g((function(){return(0,i.Z)((0,i.Z)({},j),{},{phone:!j.phone})}));break;case"filial":g((function(){return(0,i.Z)((0,i.Z)({},j),{},{filial:!j.filial})}));break;case"isPaid":g((function(){return(0,i.Z)((0,i.Z)({},j),{},{isPaid:!j.isPaid})}));break;case"status":g((function(){return(0,i.Z)((0,i.Z)({},j),{},{status:!j.status})}));break;default:;}}(e)};return(0,o.jsxs)("th",{className:"table__col table__col--head",onClick:function(){return!l&&!d&&Z(a)},children:[t,l||u||!j[a]?(0,o.jsx)(_.sF,{}):(0,o.jsx)(h.qwl,{})]})},v=function(){var e=(0,r.C)((function(e){return e.tableSlice})),a=e.tableData,t=e.isTableDataLoading,n=e.fetchUsersErrMsg,l=e.isUsersDataEmpty,u=e.tableHeadTemplate,d=(0,r.T)();return(0,s.useEffect)((function(){0===a.length?d((0,c.LQ)(!0)):d((0,c.LQ)(!1))}),[a]),(0,o.jsx)("div",{className:"table-wrapper",children:(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{className:"table__head sticky",children:(0,o.jsx)("tr",{className:"table__row table__row--head",children:u.map((function(e){return(0,o.jsx)(b,(0,i.Z)((0,i.Z)({},e),{},{isTableDataLoading:t,isUsersDataEmpty:l,fetchUsersErrMsg:n}),e.id)}))})}),(0,o.jsxs)("tbody",{className:t?"table__body loading":l?"table__body empty":"table__body",children:[t?(0,o.jsx)("div",{className:"table__preloader",children:(0,o.jsx)(f.Z,{})}):(0,o.jsx)(o.Fragment,{children:a.map((function(e){return(0,o.jsx)(p,(0,i.Z)({},e),e.id)}))}),!t&&n&&(0,o.jsxs)("span",{className:"error-message",children:["Error: ",n]}),t||n||!l?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)("span",{className:"message",children:"No matches!"})]})]})})},x=function(){var e=(0,r.C)((function(e){return e.tableSlice})),a=e.request\u0421ount,t=e.isTableDataLoading,i=e.tableData,u=e.isMainPage,d=(0,s.useState)("\u0437\u0430\u044f\u0432\u043e\u043a"),f=(0,n.Z)(d,2),p=f[0],_=f[1],h=(0,r.T)();return(0,s.useEffect)((function(){h((0,c.tX)(i.length)),a>=5||0===a?_("\u0437\u0430\u044f\u0432\u043e\u043a"):a>=2||a<=4?_("\u0437\u0430\u044f\u0432\u043a\u0438"):1===a&&_("\u0437\u0430\u044f\u0432\u043a\u0430")}),[a,i]),(0,s.useEffect)((function(){return function(){h((0,c.nv)({name:"ID",value:""})),h((0,c.nv)({name:"FIO",value:""})),h((0,c.nv)({name:"BIRTH",value:""})),h((0,c.nv)({name:"PHONE",value:""}))}}),[u]),(0,o.jsx)("section",{className:"main-page",children:(0,o.jsxs)("div",{className:"main-page__wrapper",children:[(0,o.jsx)("div",{className:"result",children:(0,o.jsxs)("div",{className:"result__wrapper",children:[(0,o.jsx)(l.jyt,{size:"34px",color:"#000"}),(0,o.jsxs)("h1",{className:"result__text",children:[t?"0":a," ",p]})]})}),(0,o.jsx)(m,{}),(0,o.jsx)(v,{})]})})}}}]);
//# sourceMappingURL=249.33703608.chunk.js.map