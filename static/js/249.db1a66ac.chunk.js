"use strict";(self.webpackChunkcode_construction_task=self.webpackChunkcode_construction_task||[]).push([[249],{249:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});var n=t(885),l=t(791),s=t(71),r=t(740),i=t(413),c=t(881);function u(e){var a=(0,l.useState)(e),t=(0,n.Z)(a,2),s=t[0],i=t[1],u=(0,r.T)();return{value:s,setValue:i,onInputChange:function(e){var a=e.name,t=e.value;switch(a){case"ID":i(t.replace(/[^0-9]/g,"")),u((0,c.nv)({filterProp:a,value:t.replace(/[^0-9-]/g,"")}));break;case"FIO":i(t.replace(/[^a-zA-Z\s]/g,"")),u((0,c.nv)({filterProp:a,value:t.replace(/[^a-zA-Z\s]/g,"").trim()}));break;case"BIRTH":i(t.replace(/[^0-9/]/g,"")),u((0,c.nv)({filterProp:a,value:t.replace(/[^0-9/]/g,"")}));break;case"PHONE":i(t.replace(/[^0-9-)(.]/g,"")),u((0,c.nv)({filterProp:a,value:t.replace(/[^0-9-)(.]/g,"")}));break;default:return}}}}var o=t(184),d=function(e){var a=e.id,t=e.options,n=e.isTableDataLoading,l=e.status,s=e.role,i=(0,r.T)();return(0,o.jsx)("select",{className:"".concat(s||""," selection-menu"),defaultValue:t[0].option,onChange:function(e){return t=e.target.value,void i((0,c.nv)({filterProp:a,value:t}));var t},disabled:n||"failed"===l,children:t.map((function(e){return(0,o.jsx)("option",{className:"selection-menu__option",value:e.option,children:e.option},e.id)}))})},f=function(){var e=(0,r.C)((function(e){return e.formSlice})).formSelectTemplates,a=(0,r.C)((function(e){return e.tableSlice})),t=a.isTableDataLoading,n=a.status,s=u(""),c=u(""),f=u(""),p=u(""),h=(0,l.useRef)(null),m=function(e,a){switch(e){case"ID":s.onInputChange({name:e,value:a.target.value}),c.setValue(""),f.setValue(""),p.setValue("");break;case"FIO":c.onInputChange({name:e,value:a.target.value}),s.setValue(""),f.setValue(""),p.setValue("");break;case"BIRTH":f.onInputChange({name:e,value:a.target.value}),s.setValue(""),c.setValue(""),p.setValue("");break;case"PHONE":p.onInputChange({name:e,value:a.target.value}),s.setValue(""),c.setValue(""),f.setValue("");break;default:return}};return(0,l.useEffect)((function(){!t&&h.current&&h.current.focus()}),[t,h]),(0,o.jsx)("form",{className:"form",children:(0,o.jsxs)("fieldset",{className:"form__wrapper",children:[(0,o.jsx)("input",{className:"form__input form__input--id",ref:h,type:"text",placeholder:"ID",value:s.value,onChange:function(e){return m("ID",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n}),(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0424\u0418\u041e",value:c.value,onChange:function(e){return m("FIO",e)},disabled:t||"failed"===n}),(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",value:f.value,onChange:function(e){return m("BIRTH",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n}),(0,o.jsx)("input",{className:"form__input",type:"text",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",value:p.value,onChange:function(e){return m("PHONE",e)},onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},disabled:t||"failed"===n}),(0,o.jsx)(o.Fragment,{children:e.map((function(e){return(0,o.jsx)(d,(0,i.Z)((0,i.Z)({},e),{},{role:"form__selection-menu",isTableDataLoading:t,status:n}),e.id)}))})]})})},p=t(100),h=function(e){var a=e.id,t=e.name,r=e.birth,i=e.phone,c=e.filial,u=e.isPaid,d=e.status,f=(0,l.useState)({"\u0417\u0430\u043a\u0440\u044b\u0442\u0430":"close","\u041d\u043e\u0432\u0430\u044f":"active","\u0412 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435":"progress"}),p=(0,n.Z)(f,1)[0];return(0,o.jsxs)("tr",{className:"table__row",children:[(0,o.jsx)("td",{className:"table__cell table__cell--id",children:a}),(0,o.jsx)("td",{className:"table__cell table__cell--name",children:t}),(0,o.jsx)("td",{className:"table__cell table__cell--birth",children:r}),(0,o.jsx)("td",{className:"table__cell table__cell--phone",children:i}),(0,o.jsx)("td",{className:"table__cell table__cell--filial",children:c}),(0,o.jsx)("td",{className:"table__cell table__cell--paid",children:u?(0,o.jsx)(s.GcF,{size:"24px",color:"green"}):(0,o.jsx)(s.Jvf,{size:"24px",color:"red"})}),(0,o.jsx)("td",{className:"table__cell table__cell--status ".concat(p[d]),children:d})]},a)},m=t(355),_=t(36),b=function(e){var a=e.name,t=e.text,s=e.isTableDataLoading,u=e.isUsersDataEmpty,d=e.fetchUsersErrMsg,f=(0,l.useState)("DSC"),p=(0,n.Z)(f,2),h=p[0],b=p[1],v=(0,l.useState)({id:!1,fio:!1,birth:!1,phone:!1,filial:!1,isPaid:!1,status:!1}),x=(0,n.Z)(v,2),g=x[0],j=x[1],N=(0,r.T)(),Z=function(e){"DSC"===h?(b("ASC"),N((0,c.$c)({sortOpt:e}))):"ASC"===h&&(b("DSC"),N((0,c.uB)({sortOpt:e}))),function(e){switch(e){case"id":j((function(){return(0,i.Z)((0,i.Z)({},g),{},{id:!g.id})}));break;case"fio":j((function(){return(0,i.Z)((0,i.Z)({},g),{},{fio:!g.fio})}));break;case"birth":j((function(){return(0,i.Z)((0,i.Z)({},g),{},{birth:!g.birth})}));break;case"phone":j((function(){return(0,i.Z)((0,i.Z)({},g),{},{phone:!g.phone})}));break;case"filial":j((function(){return(0,i.Z)((0,i.Z)({},g),{},{filial:!g.filial})}));break;case"isPaid":j((function(){return(0,i.Z)((0,i.Z)({},g),{},{isPaid:!g.isPaid})}));break;case"status":j((function(){return(0,i.Z)((0,i.Z)({},g),{},{status:!g.status})}));break;default:;}}(e)};return(0,o.jsxs)("th",{className:"table__col table__col--head",onClick:function(){return!s&&!d&&Z(a)},children:[t,s||u||!g[a]?(0,o.jsx)(m.sF,{}):(0,o.jsx)(_.qwl,{})]})},v=function(){var e=(0,r.C)((function(e){return e.tableSlice})),a=e.filteredTableData,t=e.isTableDataLoading,n=e.fetchUsersErrMsg,s=e.isUsersDataEmpty,u=e.tableHeadTemplate,d=(0,r.T)();return(0,l.useEffect)((function(){0===a.length?d((0,c.LQ)(!0)):d((0,c.LQ)(!1))}),[a]),(0,o.jsx)("div",{className:"table-wrapper",children:(0,o.jsxs)("table",{className:"table ".concat(t?"loading":""," ").concat(s?"empty":""),children:[(0,o.jsx)("thead",{className:"table__head sticky",children:(0,o.jsx)("tr",{className:"table__row table__row--head",children:u.map((function(e){return(0,o.jsx)(b,(0,i.Z)((0,i.Z)({},e),{},{isTableDataLoading:t,isUsersDataEmpty:s,fetchUsersErrMsg:n}),e.id)}))})}),(0,o.jsxs)("tbody",{className:"table__body",children:[t?(0,o.jsx)("div",{className:"table__preloader",children:(0,o.jsx)(p.Z,{})}):(0,o.jsx)(o.Fragment,{children:a.map((function(e){return(0,o.jsx)(h,(0,i.Z)({},e),e.id)}))}),!t&&n&&(0,o.jsxs)("span",{className:"error-message",children:["Error: ",n]}),t||n||!s?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)("span",{className:"message",children:"No matches!"})]})]})})},x=function(){var e=(0,r.C)((function(e){return e.tableSlice})),a=e.request\u0421ount,t=e.isTableDataLoading,i=e.tableData,u=e.isMainPage,d=(0,l.useState)("\u0437\u0430\u044f\u0432\u043e\u043a"),p=(0,n.Z)(d,2),h=p[0],m=p[1],_=(0,r.T)();return(0,l.useEffect)((function(){_((0,c.tX)(i.length)),a>=5||0===a?m("\u0437\u0430\u044f\u0432\u043e\u043a"):a>=2||a<=4?m("\u0437\u0430\u044f\u0432\u043a\u0438"):1===a&&m("\u0437\u0430\u044f\u0432\u043a\u0430")}),[a,i]),(0,l.useEffect)((function(){return function(){_((0,c.nv)({filterProp:"ID",value:""})),_((0,c.nv)({filterProp:"FIO",value:""})),_((0,c.nv)({filterProp:"BIRTH",value:""})),_((0,c.nv)({filterProp:"PHONE",value:""}))}}),[u]),(0,o.jsx)("section",{className:"main-page",children:(0,o.jsxs)("div",{className:"main-page__wrapper",children:[(0,o.jsx)("div",{className:"result",children:(0,o.jsxs)("div",{className:"result__wrapper",children:[(0,o.jsx)(s.jyt,{size:"34px",color:"#000"}),(0,o.jsxs)("h1",{className:"result__text",children:[t?"0":a," ",h]})]})}),(0,o.jsx)(f,{}),(0,o.jsx)(v,{})]})})}}}]);
//# sourceMappingURL=249.db1a66ac.chunk.js.map